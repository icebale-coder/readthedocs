title: Linux bases

# Linux базовые понятия

## 1. Последовательность запуска системы.

### 1.2. Последовательность загрузки/загрузчик grub

### 1.3 Системы скриптов init.d/systemctl

## 2. Сигналы POSIX

## 3. Файловая система
Права доступа

## 4. Потоки данных
Потоки данных input, output, stderr

Перенаправление потоков  "| > <"

типы файлов: pipe,socket

## 5. Вход с систему, ограничения доступа

На примере Debian

### 5.1. Настройка ssh

#### Ограничение входа под root по ssh

С версии OpenSSH 7.0 поменялись дефолтовые параметры входа для пользователя root по ssh.

Теперь по дефолту стоит "PermitRootLogin prohibit-password".
Что означает, что удалённый вход под пользователем root с парольной и интерактивной аутентификацией теперь запрещён.

Для разрешения входа под root по ssh необходимо исправить строку в конфиге sshd_config и перезагрузить сервис.
```bash
/etc/ssh/sshd_config
	PermitRootLogin yes
```
#### Настройка входа по ключу под root-ом

https://losst.ru/avtorizatsiya-po-klyuchu-ssh

Для входа под root-ом по ключу ssh необходимо добавить  публичный ключ пользователя
в директорию /root/.ssh/authorized_keys 

Изначально директории /root/.ssh нет, п.э. её надо создать

```bash
cd /root
mkdir ./ssh
echo 'PUBLIC_USER_KEY' > /root/.ssh/authorized_keys
```
P.S. Чтобы пользоваться входом по ключу со стороны клиента ssh надо указать свой приватный ключ для этого соединения.

#### Настройка входа по ключу под обычной учеткой
Для входа под учеткой USERNAME по ключу ssh необходимо добавить свой публичный ключ 
в директорию пользователя /home/USERNAME/.ssh/authorized_keys.

```bash
cd /home/USERNAME
mkdir ./ssh
echo 'PUBLIC_USER_KEY' > /home/USERNAME/.ssh/authorized_keys
```
P.S. Чтобы пользоваться входом по ключу со стороны клиента ssh надо указать свой приватный ключ для этого соединения.


### 5.2. Повышение привелегий через "sudo su -"

#### su

"su" - Позволяет заходить обыкновенному пользователю под "superuser" - пользователем root, 
введя соответственно его пароль

Алгоритм работы при использовании su:
```bash
1. Авторизуемся под своей учетной записью
2. Авторизуемся через программу su под root пользователем.
```

#### sudo 
"sudo" - Программа 

```bash
# Allow members of group sudo to execute any command
%sudo<->ALL=(ALL:ALL) NOPASSWD:ALL
```

sudo su - полностью выполняется логин от имени рута.

sudo -i логин эмулируется.

#### Ограничение входа - вход только по ключу

===============su, sudo, ssh, вход по ключу

## 6. Файерволл

iptables

firewalld

## 7. Базовый набор команд

## 8. Cистема репозитариев/работа с ними

На примере Debian

apt, apt-get, dpkg